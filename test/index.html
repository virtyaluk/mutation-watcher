<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>MutationWatcher tests</title>
    <link href="../node_modules/mocha/mocha.css" media="screen" rel="stylesheet" type="text/css" />
</head>

<body>
    <!-- Required for browser reporter -->
    <div id="mocha"></div>
    <script src="../node_modules/mocha/mocha.js" type="text/javascript" charset="utf-8"></script>
    <script src="../node_modules/chai/chai.js" type="text/javascript" charset="utf-8"></script>
    <!--<script src="../node_modules/mutationobserver-shim/MutationObserver.js"></script>-->
    <script type="text/javascript" charset="utf-8">
        mocha.ui('bdd');
        expect = chai.expect;
        root = this;

        // Use this shim only in case of testing using PhantomJS
        if (window.mochaPhantomJS) {
            var s = document.createElement('script');
            s.src = '../node_modules/mutationobserver-shim/MutationObserver.js';
            document.head.appendChild(s);

            // PhantomJS seems to be the last browser not to support `Function.prototype.bind`.
            // Fixed in version 2.0, but just in case
            if (!Function.prototype.bind) {
                Function.prototype.bind = function (oThis) {
                    if (typeof this !== 'function') {
                        // closest thing possible to the ECMAScript 5
                        // internal IsCallable function
                        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
                    }

                    var aArgs = Array.prototype.slice.call(arguments, 1),
                        fToBind = this,
                        fNOP = function () {},
                        fBound = function () {
                            return fToBind.apply(this instanceof fNOP ? this : oThis,
                                aArgs.concat(Array.prototype.slice.call(arguments)));
                        };

                    fNOP.prototype = this.prototype;
                    fBound.prototype = new fNOP();

                    return fBound;
                };
            }
        }
    </script>


    <script src="../mutation-watcher.js"></script>
    <script src="test.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">
        if (window.mochaPhantomJS) {
            mochaPhantomJS.run();
        } else {
            mocha.run();
        }
    </script>
</body>

</html>